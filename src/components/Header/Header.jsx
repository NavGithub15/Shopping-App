import "./Header.scss";
import { Link } from "react-router-dom";
import { Button, Flex } from "@chakra-ui/react";
import { useDisclosure } from "@chakra-ui/react";
import SideDrawer from "../SideDrawer/SideDrawer";
import { BsCart } from "react-icons/bs";
import { CartContext } from "../../context/Context";
import { useContext } from "react";

export default function Header() {

  // opens the bottom drawer using the useDisclosure hook from chakra-ui
  const { isOpen, onOpen, onClose } = useDisclosure();

  const { totalQty } = useContext(CartContext)

  return (
    <Flex
      as="nav"
      align="center"
      wrap="wrap"
      padding="1rem 2rem 1rem 2rem"
      bg="white"
      justifyContent="space-between"
      margin="0 auto"
      border="1px solid gray"
    >
      <Flex align="center">
        <Link to="/">
          <svg
            width="112"
            height="30"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M4.644 8.981v6.05h.702c3.88 0 8.432-.642 10.418-2.964v6.935c-1.955-2.078-6.507-2.75-10.418-2.75h-.702v6.69c0 2.261.213 4.186 1.16 6.6H0c.916-2.414 1.1-4.339 1.1-6.6V8.983c0-2.261-.184-4.186-1.1-6.6h17.719l-.153 6.477C15.58 5.47 10.51 3.605 5.53 3.605h-.703c-.153 1.863-.183 3.513-.183 5.376zM31.162 29.572c-.367-.641-.642-1.802-.703-2.84-1.68 2.29-3.788 3.176-5.866 3.176-3.054 0-4.857-1.68-4.857-5.865v-6.385c0-2.75-.03-5.682-.947-7.607a50.52 50.52 0 004.4-1.71v14.938c0 1.16 0 4.094 3.268 4.094 1.13 0 2.475-.336 3.941-1.894v-7.821c0-2.689-.03-5.59-.947-7.515 1.466-.49 2.963-1.1 4.4-1.711v14.144c0 3.086.09 4.552 1.13 7.027h-3.82v-.03zM21.08 3.941c0-1.375 1.009-2.475 2.414-2.475 1.436 0 2.474 1.1 2.474 2.475 0 1.344-1.038 2.413-2.474 2.413-1.405 0-2.414-1.1-2.414-2.413zm6.569 0c0-1.375 1.008-2.475 2.413-2.475 1.436 0 2.474 1.1 2.474 2.475 0 1.344-1.038 2.413-2.474 2.413-1.405 0-2.414-1.1-2.414-2.413zM37.852 22.943V9.318c0-2.75-.092-5.682-1.008-7.607 1.558-.367 2.932-.917 4.43-1.71v22.942c0 2.26.122 4.185 1.008 6.599h-5.438c.886-2.414 1.008-4.338 1.008-6.599zM61.263 29.572H57.29c-.427-1.955-.55-4.307-.55-6.476V14.97c0-2.628-.886-4.094-3.024-4.094-1.16 0-2.688.428-4.338 2.413v9.654c0 2.26.122 4.185 1.008 6.599H44.95c.886-2.414 1.008-4.338 1.008-6.599V9.318c0-2.75-.091-5.682-1.008-7.607 1.558-.367 2.933-.917 4.43-1.71v12.127c1.802-2.871 4.002-3.818 6.11-3.818 2.75 0 4.674 1.68 4.674 5.865v8.768c0 2.26.214 4.185 1.1 6.63zM75.481 29.572c-.367-.641-.672-1.894-.764-2.84-1.374 2.138-3.757 3.176-6.049 3.176-3.024 0-5.01-1.802-5.01-4.521 0-3.972 4.308-5.224 6.538-6.018 2.535-.917 4.552-1.956 4.552-2.475v-.458c0-3.086-.458-6.996-3.972-6.996-1.71 0-2.871.916-2.871 2.963 0 .947.244 2.23.886 3.727l-4.277-.213v-1.345c0-2.932 1.833-6.354 7.118-6.354 6.568 0 6.568 5.255 6.568 7.698v6.6c0 3.085.092 4.551 1.1 7.026H75.48v.03zm-.764-3.849v-4.705c0-.641 0-.825-1.68-.825-4.46 0-5.988 1.223-5.988 3.88 0 1.894 1.039 3.27 3.422 3.27 1.65 0 3.085-.612 4.246-1.62zM93.138 29.572c-.366-.641-.641-1.802-.702-2.84-1.68 2.29-3.758 3.176-5.866 3.176-3.055 0-4.857-1.68-4.857-5.865v-6.385c0-2.75-.03-5.682-.947-7.607a50.5 50.5 0 004.399-1.71v14.938c0 1.161 0 4.094 3.269 4.094 1.13 0 2.474-.336 3.94-1.894v-7.821c0-2.689-.03-5.59-.947-7.515 1.467-.49 2.964-1.1 4.4-1.711v14.144c0 3.086.091 4.552 1.13 7.027h-3.819v-.03zM101.539 12.556c0 2.169 1.344 3.147 3.758 4.338l2.719 1.375c1.711.886 3.88 2.23 3.88 5.468 0 4.094-3.391 6.263-6.66 6.263-3.33 0-6.019-2.047-7.271-4.98l3.299-2.23c.825 3.544 2.75 5.56 5.316 5.56 1.68 0 3.055-.947 3.055-3.024 0-1.803-1.253-3.025-3.147-3.941l-3.544-1.71c-1.344-.673-4.154-2.262-4.154-5.347 0-3.3 2.505-6.11 8.065-6.11 1.375 0 3.147.305 4.277.764l-.672 5.468c-1.619-3.085-3.422-4.521-5.927-4.521-1.802.06-2.994 1.038-2.994 2.627z"
              fill="#000"
            ></path>
          </svg>
        </Link>
      </Flex>

      <Flex align="center">

          <button onClick={onOpen} className="header-button">
          <BsCart
          className="react-icons react-icons-custom"
          />
          <span className="header-span">
             {totalQty}
          </span>
        </button>
          
      </Flex>
      <SideDrawer isOpen={isOpen} onClose={onClose} />
    </Flex>
  );
}
